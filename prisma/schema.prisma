generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id     Int     @id @default(autoincrement())
  nome   String
  email  String  @unique
  senha  String

  filmes Filme[]
}

model Filme {
  id               Int      @id @default(autoincrement())
  tituloOriginal   String
  tituloTraduzido  String
  descricao        String
  sinopse          String?
  orcamento        Int?
  dtLancamento     DateTime
  urlImagem        String?
  duracao          Int?
  receita          Int?
  lucro            Int?
  linkTrailer      String?

  usuarioId        Int
  usuario          Usuario   @relation(fields: [usuarioId], references: [id])

  generos          GeneroFilme[]
}

model Genero {
  id     Int     @id @default(autoincrement())
  nome   String

  filmes GeneroFilme[]
}

model GeneroFilme {
  filmeId Int
  generoId Int

  filme   Filme   @relation(fields: [filmeId], references: [id])
  genero  Genero  @relation(fields: [generoId], references: [id])

  @@id([filmeId, generoId])
}
